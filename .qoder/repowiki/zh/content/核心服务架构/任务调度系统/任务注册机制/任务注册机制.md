# ä»»åŠ¡æ³¨å†Œæœºåˆ¶

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**  
- [metabase/task/impl.clj](file://src/metabase/task/impl.clj)
- [metabase/core/core.clj](file://src/metabase/core/core.clj)
- [metabase/startup/core.clj](file://src/metabase/startup/core.clj)
- [metabase/analytics/task/send_anonymous_stats.clj](file://src/metabase/analytics/task/send_anonymous_stats.clj)
- [metabase/notification/task/send.clj](file://src/metabase/notification/task/send.clj)
- [metabase/sync/task/sync_databases.clj](file://src/metabase/sync/task/sync_databases.clj)
- [metabase/core/init.clj](file://src/metabase/core/init.clj)
- [metabase/analytics/init.clj](file://src/metabase/analytics/init.clj)
- [metabase/notification/init.clj](file://src/metabase/notification/init.clj)
- [metabase/sync/init.clj](file://src/metabase/sync/init.clj)
</cite>

## ç›®å½•
1. [å¼•è¨€](#å¼•è¨€)
2. [ä»»åŠ¡æ³¨å†Œæœºåˆ¶æ¦‚è¿°](#ä»»åŠ¡æ³¨å†Œæœºåˆ¶æ¦‚è¿°)
3. [åŸºäºdefmultiçš„init!å¤šæ€åˆ†å‘ç³»ç»Ÿ](#åŸºäºdefmultiçš„init!å¤šæ€åˆ†å‘ç³»ç»Ÿ)
4. [æ¨¡å—ä»»åŠ¡æ³¨å†Œå®ç°](#æ¨¡å—ä»»åŠ¡æ³¨å†Œå®ç°)
5. [ä»»åŠ¡æ³¨å†Œè°ƒç”¨æ—¶æœºä¸æ‰§è¡Œé¡ºåº](#ä»»åŠ¡æ³¨å†Œè°ƒç”¨æ—¶æœºä¸æ‰§è¡Œé¡ºåº)
6. [ä»»åŠ¡æ³¨å†Œå®‰å…¨æ€§è€ƒè™‘](#ä»»åŠ¡æ³¨å†Œå®‰å…¨æ€§è€ƒè™‘)
7. [ä»»åŠ¡æ³¨å†Œæœ€ä½³å®è·µ](#ä»»åŠ¡æ³¨å†Œæœ€ä½³å®è·µ)
8. [ç»“è®º](#ç»“è®º)

## å¼•è¨€
Metabaseæ˜¯ä¸€ä¸ªå¼€æºçš„æ•°æ®åˆ†æå¹³å°ï¼Œå…¶ä»»åŠ¡æ³¨å†Œæœºåˆ¶æ˜¯ç³»ç»Ÿåˆå§‹åŒ–è¿‡ç¨‹ä¸­çš„å…³é”®ç»„æˆéƒ¨åˆ†ã€‚è¯¥æœºåˆ¶é€šè¿‡åŸºäº`defmulti`çš„`init!`å¤šæ€åˆ†å‘ç³»ç»Ÿï¼Œå®ç°äº†å„ä¸ªæ¨¡å—åœ¨åº”ç”¨å¯åŠ¨æ—¶æ³¨å†Œè‡ªèº«ä»»åŠ¡çš„åŠŸèƒ½ã€‚æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†è¿™ä¸€æœºåˆ¶çš„å·¥ä½œåŸç†ã€å®ç°æ–¹å¼ã€è°ƒç”¨æ—¶æœºã€å®‰å…¨æ€§è€ƒè™‘ä»¥åŠæœ€ä½³å®è·µï¼Œä¸ºå¼€å‘è€…æä¾›äº†å…¨é¢çš„ç†è§£å’ŒæŒ‡å¯¼ã€‚

## ä»»åŠ¡æ³¨å†Œæœºåˆ¶æ¦‚è¿°
Metabaseçš„ä»»åŠ¡æ³¨å†Œæœºåˆ¶åŸºäºQuartziteè°ƒåº¦æ¡†æ¶ï¼Œé€šè¿‡`defmulti`å®šä¹‰çš„`init!`å¤šæ€å‡½æ•°å®ç°ã€‚è¯¥æœºåˆ¶å…è®¸å„ä¸ªæ¨¡å—åœ¨åº”ç”¨å¯åŠ¨æ—¶æ³¨å†Œè‡ªå·±çš„åå°ä»»åŠ¡ï¼Œç¡®ä¿ç³»ç»ŸåŠŸèƒ½çš„å®Œæ•´æ€§å’Œå¯æ‰©å±•æ€§ã€‚ä»»åŠ¡æ³¨å†Œçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä»»åŠ¡çš„å®šä¹‰å’Œè°ƒåº¦åˆ†ç¦»ï¼Œé€šè¿‡å¤šæ€åˆ†å‘æœºåˆ¶å®ç°çµæ´»çš„ä»»åŠ¡ç®¡ç†ã€‚

```mermaid
graph TD
A[åº”ç”¨å¯åŠ¨] --> B[åŠ è½½æ ¸å¿ƒæ¨¡å—]
B --> C[åˆå§‹åŒ–ä»»åŠ¡è°ƒåº¦å™¨]
C --> D[è°ƒç”¨æ‰€æœ‰init!å®ç°]
D --> E[å„æ¨¡å—æ³¨å†Œä»»åŠ¡]
E --> F[ä»»åŠ¡è°ƒåº¦å™¨å¯åŠ¨]
```

**Diagram sources**
- [metabase/task/impl.clj](file://src/metabase/task/impl.clj#L54-L81)
- [metabase/core/core.clj](file://src/metabase/core/core.clj#L202-L236)

## åŸºäºdefmultiçš„init!å¤šæ€åˆ†å‘ç³»ç»Ÿ
Metabaseä½¿ç”¨Clojureçš„`defmulti`å®å®šä¹‰äº†ä¸€ä¸ªåä¸º`init!`çš„å¤šæ€å‡½æ•°ï¼Œä½œä¸ºä»»åŠ¡æ³¨å†Œçš„æ ¸å¿ƒæœºåˆ¶ã€‚è¿™ä¸ªå¤šæ€å‡½æ•°çš„åˆ†æ´¾å€¼æ˜¯å…³é”®å­—ç±»å‹ï¼Œå…è®¸å„ä¸ªæ¨¡å—é€šè¿‡å®ç°`defmethod`æ¥æ³¨å†Œè‡ªå·±çš„ä»»åŠ¡ã€‚

```clojure
(defmulti init!
  "Initialize (i.e., schedule) Job(s) with a given name. All implementations of this method are called once and only
  once when the Quartz task scheduler is initialized. Task namespaces (`metabase.<module>.task.*`) should add new
  implementations of this method to schedule the jobs they define (i.e., with a call to `schedule-task!`.)"
  {:arglists '([job-name-string])}
  keyword)
```

`init!`å‡½æ•°çš„åˆ†æ´¾å‡½æ•°æ˜¯`keyword`ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰å®ç°éƒ½å¿…é¡»ä½¿ç”¨å…³é”®å­—ä½œä¸ºåˆ†æ´¾å€¼ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œè¿™äº›å…³é”®å­—åº”è¯¥æ˜¯å‘½åç©ºé—´åŒ–çš„ï¼Œå¹¶ä¸”ä¿æŒé©¼å³°å‘½åæ³•ï¼Œä»¥ç¡®ä¿å”¯ä¸€æ€§å’Œä¸€è‡´æ€§ã€‚

`init!`å‡½æ•°çš„å®ç°ç”±`init-tasks!`å‡½æ•°è°ƒç”¨ï¼Œè¯¥å‡½æ•°éå†æ‰€æœ‰`init!`çš„å®ç°æ–¹æ³•å¹¶ä¾æ¬¡æ‰§è¡Œï¼š

```clojure
(defn- init-tasks!
  "Call all implementations of `init!`"
  []
  (doseq [[k f] (methods init!)]
    (try
      (log/info "Initializing task" (u/format-color 'green (name k)) (u/emoji "ğŸ“†"))
      (f k)
      (catch Throwable e
        (log/errorf e "Error initializing task %s" k)))))
```

è¿™ç§è®¾è®¡æ¨¡å¼å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š
- **çµæ´»æ€§**ï¼šå„ä¸ªæ¨¡å—å¯ä»¥ç‹¬ç«‹åœ°æ³¨å†Œè‡ªå·±çš„ä»»åŠ¡ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚
- **å¯æ‰©å±•æ€§**ï¼šæ–°çš„æ¨¡å—å¯ä»¥è½»æ¾åœ°æ·»åŠ ä»»åŠ¡æ³¨å†Œé€»è¾‘ã€‚
- **è§£è€¦**ï¼šä»»åŠ¡å®šä¹‰å’Œè°ƒåº¦é€»è¾‘åˆ†ç¦»ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚

**Section sources**
- [metabase/task/impl.clj](file://src/metabase/task/impl.clj#L54-L81)

## æ¨¡å—ä»»åŠ¡æ³¨å†Œå®ç°
å„ä¸ªæ¨¡å—é€šè¿‡åœ¨å„è‡ªçš„`task`å‘½åç©ºé—´ä¸­å®ç°`init!`æ–¹æ³•æ¥æ³¨å†Œä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…·ä½“çš„å®ç°ç¤ºä¾‹ï¼š

### åˆ†ææ¨¡å—ä»»åŠ¡æ³¨å†Œ
åˆ†ææ¨¡å—é€šè¿‡`metabase.analytics.task.send_anonymous_stats`å‘½åç©ºé—´æ³¨å†Œäº†ä¸€ä¸ªå‘é€åŒ¿åç»Ÿè®¡ä¿¡æ¯çš„ä»»åŠ¡ï¼š

```clojure
(defmethod task/init! ::SendAnonymousUsageStats
  [_]
  (let [job      (jobs/build
                  (jobs/of-type SendAnonymousUsageStats)
                  (jobs/with-identity (jobs/key job-key)))
        schedule (cron/cron-schedule
                  (format "0 %d %d * * ? *"
                          (rand-int 60)
                          (rand-int 24)))
        trigger  (triggers/build
                  (triggers/with-identity (triggers/key trigger-key))
                  (triggers/start-now)
                  (triggers/with-schedule schedule))]
    (task/schedule-task! job trigger)))
```

è¿™ä¸ªå®ç°åˆ›å»ºäº†ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©åœ¨éšæœºçš„å°æ—¶å’Œåˆ†é’Ÿæ‰§è¡Œï¼Œç”¨äºå‘é€åŒ¿åä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯ã€‚

### é€šçŸ¥æ¨¡å—ä»»åŠ¡æ³¨å†Œ
é€šçŸ¥æ¨¡å—é€šè¿‡`metabase.notification.task.send`å‘½åç©ºé—´æ³¨å†Œäº†å‘é€é€šçŸ¥çš„ä»»åŠ¡ï¼š

```clojure
(defmethod task/init! ::SendNotifications [_]
  (let [send-notification-job              (jobs/build
                                            (jobs/with-identity send-notification-job-key)
                                            (jobs/with-description "Send Notification")
                                            (jobs/of-type SendNotification)
                                            (jobs/store-durably))
        init-notification-triggers-job     (jobs/build
                                            (jobs/of-type InitNotificationTriggers)
                                            (jobs/with-identity (jobs/key "metabase.task.notification.init-notification-triggers.job"))
                                            (jobs/store-durably))
        init-notification-triggers-trigger (triggers/build
                                            (triggers/with-identity (triggers/key "metabase.task.notification.init-notification-triggers.trigger"))
                                            (triggers/start-now))]
    (task/add-job! send-notification-job)
    (task/schedule-task! init-notification-triggers-job init-notification-triggers-trigger)))
```

è¿™ä¸ªå®ç°æ³¨å†Œäº†ä¸¤ä¸ªä»»åŠ¡ï¼šä¸€ä¸ªæ˜¯å‘é€é€šçŸ¥çš„ä¸»ä»»åŠ¡ï¼Œå¦ä¸€ä¸ªæ˜¯åˆå§‹åŒ–é€šçŸ¥è§¦å‘å™¨çš„è¾…åŠ©ä»»åŠ¡ã€‚

### åŒæ­¥æ¨¡å—ä»»åŠ¡æ³¨å†Œ
åŒæ­¥æ¨¡å—é€šè¿‡`metabase.sync.task.sync_databases`å‘½åç©ºé—´æ³¨å†Œäº†æ•°æ®åº“åŒæ­¥ä»»åŠ¡ï¼š

```clojure
(defmethod task/init! ::SyncDatabases
  [_]
  (job-init)
  (randomize-db-schedules-if-needed!))
```

è¿™ä¸ªå®ç°é¦–å…ˆåˆå§‹åŒ–äº†åŒæ­¥å’Œåˆ†æä»»åŠ¡çš„ä½œä¸šï¼Œç„¶åéšæœºåŒ–äº†æ•°æ®åº“çš„è°ƒåº¦æ—¶é—´ï¼Œä»¥é¿å…æ‰€æœ‰æ•°æ®åº“åŒæ—¶è¿›è¡ŒåŒæ­¥æ“ä½œã€‚

**Section sources**
- [metabase/analytics/task/send_anonymous_stats.clj](file://src/metabase/analytics/task/send_anonymous_stats.clj#L30-L39)
- [metabase/notification/task/send.clj](file://src/metabase/notification/task/send.clj#L200-L211)
- [metabase/sync/task/sync_databases.clj](file://src/metabase/sync/task/sync_databases.clj#L360-L367)

## ä»»åŠ¡æ³¨å†Œè°ƒç”¨æ—¶æœºä¸æ‰§è¡Œé¡ºåº
ä»»åŠ¡æ³¨å†Œçš„è°ƒç”¨æ—¶æœºå’Œæ‰§è¡Œé¡ºåºæ˜¯Metabaseåº”ç”¨å¯åŠ¨è¿‡ç¨‹ä¸­çš„å…³é”®ç¯èŠ‚ã€‚æ•´ä¸ªè¿‡ç¨‹éµå¾ªä¸¥æ ¼çš„é¡ºåºï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§ã€‚

### åº”ç”¨å¯åŠ¨æµç¨‹
Metabaseçš„åº”ç”¨å¯åŠ¨æµç¨‹å¦‚ä¸‹ï¼š

1. **åˆå§‹åŒ–ä¿¡å·æ—¥å¿—**ï¼šè®¾ç½®ä¿¡å·å¤„ç†å’Œæ—¥å¿—è®°å½•ã€‚
2. **åŠ è½½æ’ä»¶**ï¼šåŠ è½½æ‰€æœ‰å¯ç”¨çš„æ’ä»¶ã€‚
3. **è®¾ç½®æ•°æ®åº“**ï¼šéªŒè¯æ•°æ®åº“è¿æ¥å¹¶æ‰§è¡Œå¿…è¦çš„è¿ç§»ã€‚
4. **è¿è¡Œå¯åŠ¨é€»è¾‘**ï¼šæ‰§è¡Œæ‰€æœ‰`def-startup-logic!`çš„å®ç°ã€‚
5. **å¯åŠ¨ä»»åŠ¡è°ƒåº¦å™¨**ï¼šåˆå§‹åŒ–å¹¶å¯åŠ¨Quartzä»»åŠ¡è°ƒåº¦å™¨ã€‚
6. **å¯åŠ¨ç›‘å¬å™¨**ï¼šå¯åŠ¨æ‰€æœ‰æ¶ˆæ¯é˜Ÿåˆ—ç›‘å¬å™¨ã€‚
7. **æ ‡è®°åˆå§‹åŒ–å®Œæˆ**ï¼šé€šçŸ¥ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆã€‚

```mermaid
sequenceDiagram
participant App as åº”ç”¨
participant Startup as å¯åŠ¨é€»è¾‘
participant TaskScheduler as ä»»åŠ¡è°ƒåº¦å™¨
participant Listener as ç›‘å¬å™¨
App->>App : åˆå§‹åŒ–ä¿¡å·æ—¥å¿—
App->>App : åŠ è½½æ’ä»¶
App->>App : è®¾ç½®æ•°æ®åº“
App->>Startup : è¿è¡Œå¯åŠ¨é€»è¾‘
Startup-->>App : å®Œæˆ
App->>TaskScheduler : å¯åŠ¨ä»»åŠ¡è°ƒåº¦å™¨
TaskScheduler-->>App : å®Œæˆ
App->>Listener : å¯åŠ¨ç›‘å¬å™¨
Listener-->>App : å®Œæˆ
App->>App : æ ‡è®°åˆå§‹åŒ–å®Œæˆ
```

**Diagram sources**
- [metabase/core/core.clj](file://src/metabase/core/core.clj#L151-L176)
- [metabase/core/core.clj](file://src/metabase/core/core.clj#L202-L236)

### ä»»åŠ¡æ³¨å†Œæ‰§è¡Œé¡ºåº
ä»»åŠ¡æ³¨å†Œçš„å…·ä½“æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š

1. **åŠ è½½æ ¸å¿ƒæ¨¡å—**ï¼šé¦–å…ˆåŠ è½½`metabase.core.init`æ¨¡å—ï¼Œè¯¥æ¨¡å—è´Ÿè´£åŠ è½½æ‰€æœ‰éœ€è¦åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶åŠ è½½çš„å‘½åç©ºé—´ã€‚
2. **åˆå§‹åŒ–ä»»åŠ¡è°ƒåº¦å™¨**ï¼šè°ƒç”¨`init-scheduler!`å‡½æ•°åˆå§‹åŒ–Quartzè°ƒåº¦å™¨ã€‚
3. **è°ƒç”¨init!å®ç°**ï¼šéå†æ‰€æœ‰`init!`çš„å®ç°æ–¹æ³•å¹¶ä¾æ¬¡æ‰§è¡Œã€‚
4. **å¯åŠ¨è°ƒåº¦å™¨**ï¼šè°ƒç”¨`start-scheduler!`å‡½æ•°å¯åŠ¨è°ƒåº¦å™¨ï¼Œå¼€å§‹æ‰§è¡Œå·²æ³¨å†Œçš„ä»»åŠ¡ã€‚

è¿™ç§é¡ºåºç¡®ä¿äº†ä»»åŠ¡åœ¨ç³»ç»Ÿå®Œå…¨åˆå§‹åŒ–åæ‰å¼€å§‹æ‰§è¡Œï¼Œé¿å…äº†å› ä¾èµ–æœªå‡†å¤‡å¥½è€Œå¯¼è‡´çš„é”™è¯¯ã€‚

**Section sources**
- [metabase/core/core.clj](file://src/metabase/core/core.clj#L202-L236)
- [metabase/task/impl.clj](file://src/metabase/task/impl.clj#L100-L120)

## ä»»åŠ¡æ³¨å†Œå®‰å…¨æ€§è€ƒè™‘
ä»»åŠ¡æ³¨å†Œæœºåˆ¶åœ¨è®¾è®¡æ—¶å……åˆ†è€ƒè™‘äº†å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•ç­‰æ–¹é¢ã€‚

### å¼‚å¸¸å¤„ç†
æ¯ä¸ª`init!`å®ç°çš„è°ƒç”¨éƒ½è¢«åŒ…è£¹åœ¨`try-catch`å—ä¸­ï¼Œç¡®ä¿å³ä½¿æŸä¸ªä»»åŠ¡æ³¨å†Œå¤±è´¥ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–ä»»åŠ¡çš„æ³¨å†Œï¼š

```clojure
(doseq [[k f] (methods init!)]
  (try
    (log/info "Initializing task" (u/format-color 'green (name k)) (u/emoji "ğŸ“†"))
    (f k)
    (catch Throwable e
      (log/errorf e "Error initializing task %s" k))))
```

è¿™ç§è®¾è®¡æ¨¡å¼ç¡®ä¿äº†ç³»ç»Ÿçš„å¥å£®æ€§ï¼Œå³ä½¿æŸä¸ªæ¨¡å—çš„ä»»åŠ¡æ³¨å†Œå‡ºç°å¼‚å¸¸ï¼Œæ•´ä¸ªç³»ç»Ÿä»ç„¶å¯ä»¥æ­£å¸¸å¯åŠ¨ã€‚

### æ—¥å¿—è®°å½•
ä»»åŠ¡æ³¨å†Œè¿‡ç¨‹ä¸­çš„æ¯ä¸ªæ­¥éª¤éƒ½æœ‰è¯¦ç»†çš„æ—¥å¿—è®°å½•ï¼Œä¾¿äºè°ƒè¯•å’Œç›‘æ§ï¼š

- **ä»»åŠ¡åˆå§‹åŒ–**ï¼šè®°å½•æ¯ä¸ªä»»åŠ¡çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚
- **é”™è¯¯ä¿¡æ¯**ï¼šè®°å½•ä»»åŠ¡æ³¨å†Œå¤±è´¥çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚
- **æ‰§è¡Œæ—¶é—´**ï¼šè®°å½•ä»»åŠ¡æ³¨å†Œçš„æ‰§è¡Œæ—¶é—´ï¼Œä¾¿äºæ€§èƒ½åˆ†æã€‚

```clojure
(log/info "Initializing task" (u/format-color 'green (name k)) (u/emoji "ğŸ“†"))
```

è¿™äº›æ—¥å¿—ä¿¡æ¯å¯¹äºç³»ç»Ÿç»´æŠ¤å’Œæ•…éšœæ’æŸ¥éå¸¸é‡è¦ã€‚

**Section sources**
- [metabase/task/impl.clj](file://src/metabase/task/impl.clj#L70-L81)

## ä»»åŠ¡æ³¨å†Œæœ€ä½³å®è·µ
ä¸ºäº†ç¡®ä¿ä»»åŠ¡æ³¨å†Œçš„æ­£ç¡®æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œéµå¾ªä»¥ä¸‹æœ€ä½³å®è·µï¼š

### å‘½åçº¦å®š
- **åˆ†æ´¾å…³é”®å­—**ï¼šä½¿ç”¨å‘½åç©ºé—´åŒ–çš„å…³é”®å­—ï¼Œä¿æŒé©¼å³°å‘½åæ³•ï¼Œå¦‚`::SendAnonymousUsageStats`ã€‚
- **ä»»åŠ¡åç§°**ï¼šä»»åŠ¡åç§°åº”ç®€æ´æ˜äº†ï¼Œåæ˜ ä»»åŠ¡çš„åŠŸèƒ½ã€‚
- **è§¦å‘å™¨åç§°**ï¼šè§¦å‘å™¨åç§°åº”åŒ…å«ä»»åŠ¡åç§°å’Œæ•°æ®åº“IDç­‰ä¿¡æ¯ï¼Œç¡®ä¿å”¯ä¸€æ€§ã€‚

### ä¾èµ–ç®¡ç†
- **æ¨¡å—åˆå§‹åŒ–**ï¼šç¡®ä¿ä»»åŠ¡æ‰€åœ¨çš„æ¨¡å—åœ¨`<module>.init`ä¸­è¢«æ­£ç¡®åŠ è½½ã€‚
- **æ ¸å¿ƒåˆå§‹åŒ–**ï¼šç¡®ä¿`<module>.init`è¢«æ·»åŠ åˆ°`core.init`ä¸­ã€‚
- **ä¾èµ–é¡ºåº**ï¼šæ³¨æ„ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç¡®ä¿ä¾èµ–çš„ä»»åŠ¡å…ˆäºè¢«ä¾èµ–çš„ä»»åŠ¡æ³¨å†Œã€‚

### ä»£ç ç»„ç»‡
- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªä»»åŠ¡æ–‡ä»¶åº”åªåŒ…å«ä¸€ä¸ªä»»åŠ¡çš„å®šä¹‰å’Œæ³¨å†Œé€»è¾‘ã€‚
- **æ–‡æ¡£æ³¨é‡Š**ï¼šä¸ºæ¯ä¸ªä»»åŠ¡æä¾›è¯¦ç»†çš„æ–‡æ¡£æ³¨é‡Šï¼Œè¯´æ˜ä»»åŠ¡çš„åŠŸèƒ½å’Œé…ç½®é€‰é¡¹ã€‚
- **æµ‹è¯•è¦†ç›–**ï¼šä¸ºä»»åŠ¡æ³¨å†Œé€»è¾‘ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿å…¶æ­£ç¡®æ€§ã€‚

### æ€§èƒ½è€ƒè™‘
- **å¼‚æ­¥æ‰§è¡Œ**ï¼šå¯¹äºè€—æ—¶è¾ƒé•¿çš„åˆå§‹åŒ–é€»è¾‘ï¼Œä½¿ç”¨`quick-task/submit-task!`åœ¨åå°æ‰§è¡Œã€‚
- **èµ„æºç®¡ç†**ï¼šåˆç†ç®¡ç†æ•°æ®åº“è¿æ¥å’Œå…¶ä»–èµ„æºï¼Œé¿å…èµ„æºæ³„æ¼ã€‚
- **é”™è¯¯æ¢å¤**ï¼šå®ç°é”™è¯¯æ¢å¤æœºåˆ¶ï¼Œç¡®ä¿ä»»åŠ¡åœ¨å¤±è´¥åèƒ½å¤Ÿè‡ªåŠ¨é‡è¯•ã€‚

**Section sources**
- [metabase/task/impl.clj](file://src/metabase/task/impl.clj#L54-L81)
- [metabase/analytics/init.clj](file://src/metabase/analytics/init.clj#L1-L4)
- [metabase/notification/init.clj](file://src/metabase/notification/init.clj#L1-L10)
- [metabase/sync/init.clj](file://src/metabase/sync/init.clj#L1-L8)

## ç»“è®º
Metabaseçš„ä»»åŠ¡æ³¨å†Œæœºåˆ¶é€šè¿‡åŸºäº`defmulti`çš„`init!`å¤šæ€åˆ†å‘ç³»ç»Ÿï¼Œå®ç°äº†çµæ´»ã€å¯æ‰©å±•çš„ä»»åŠ¡ç®¡ç†ã€‚è¯¥æœºåˆ¶åœ¨åº”ç”¨å¯åŠ¨è¿‡ç¨‹ä¸­æŒ‰ç…§ä¸¥æ ¼çš„é¡ºåºæ‰§è¡Œï¼Œç¡®ä¿äº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§ã€‚é€šè¿‡åˆç†çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚éµå¾ªæœ€ä½³å®è·µï¼Œå¯ä»¥ç¡®ä¿ä»»åŠ¡æ³¨å†Œçš„æ­£ç¡®æ€§å’Œé«˜æ•ˆæ€§ï¼Œä¸ºMetabaseçš„ç¨³å®šè¿è¡Œæä¾›æœ‰åŠ›æ”¯æŒã€‚